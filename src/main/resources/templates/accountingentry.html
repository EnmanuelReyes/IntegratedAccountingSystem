<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="layout/default">
<head lang="en">
    <title>Cuenta Contable</title>
</head>
<body>
<div class="row" layout:fragment="content">
    <h2 class="indigo-text center">Informaci√≥n de la Entrada Contable</h2>

    <div th:if="${error}" class="card-panel teal lighten-2" th:text="${error}">This is a card panel with a teal
        lighten-2 class
    </div>
    <form th:action="@{/accountingentry}" th:object="${accountingEntry}" method="post" class="col m8 s12 offset-m2">
        <ul th:if="${#fields.hasErrors('*')}" class="errorList">
            <li th:each="err : ${#fields.errors('*')}" th:text="${err}">
                Input is incorrect
            </li>
        </ul>
        <div class="row">
            <input th:field="${accountingEntry.id}" type="hidden"/>
            <div class="input-field col s6">
                <input th:field="${accountingEntry.description}" id="description" type="text" required="required"
                       th:errorclass="invalid"/>
                <label for="description">Descripcion</label>

                <div th:errors="*{description}" class="red-text">Error</div>

            </div>
            <div class="input-field col s6">
                <select th:field="*{auxiliary.id}" id="auxiliary" required="true" disabled="true">
                    <option selected="selected" value="">Ninguno</option>
                    <option th:each="auxiliary : ${auxiliaries}" th:value="${auxiliary.id}"
                            th:text="${auxiliary.description}">User
                    </option>
                </select>
                <label for="auxiliary">Auxiliar</label>

                <div th:errors="*{auxiliary}" class="red-text">Error</div>

            </div>

        </div>

        <div class="row">
            <div class="input-field col s6">
                <select th:field="*{state.id}" id="state" required="true">
                    <option selected="selected" value="">Ninguno</option>
                    <option th:each="state : ${states}" th:value="${state.id}"
                            th:text="${state.description}">User
                    </option>
                </select>
                <label for="state">Estado</label>

            </div>
        </div>


        <div class="row s12">
            <button class="btn waves-effect waves-light" type="submit" name="addTransaction">
                Agregar Transaccion
                <i class="mdi-content-send right"></i>
            </button>

        </div>

        <table>
            <thead>
            <tr>
                <th data-field="id">ID</th>
                <th data-field="description">Cuenta Contable</th>
                <th data-field="description">Origen</th>
                <th data-field="description">Monto</th>
                <th data-field="price">Acciones</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="row, rowStat : *{transactions}">
                <td><input disabled="disabled" th:field="*{transactions[__${rowStat.index}__].id}"/></td>
                <td>
                    <select th:field="*{transactions[__${rowStat.index}__].accountingAccount.id}" required="true"
                            th:errorclass="invalid">
                        <option selected="selected" value="">Ninguno</option>
                        <option th:each="accountingAccount : ${accountingAccounts}" th:value="${accountingAccount.id}"
                                th:text="${accountingAccount.description}">Cuenta
                        </option>
                    </select>
                </td>
                <td>
                    <select th:field="*{transactions[__${rowStat.index}__].origin}" id="origin"
                            required="true"
                            th:errorclass="invalid">
                        <option selected="selected" value="">Ninguno</option>
                        <option th:each="origin : ${T(me.enmanuel.accounting.entity.Origin).values()}"
                                th:value="${origin}"
                                th:text="${origin}">Origin
                        </option>
                    </select>
                </td>
                <td>
                    <input type="number" min="0" th:field="*{transactions[__${rowStat.index}__].amount}" id="amount"/>
                </td>
                <td>
                    <button class="btn red" type="submit" name="removeTransaction" th:value="${rowStat.index}"
                    >Eliminar <i class="mdi-action-delete right waves-effect"></i></button>
                </td>
            </tr>
            </tbody>
        </table>

        <div class="row s12">
            <button class="btn waves-effect waves-light" type="submit" name="save">
                Submit
                <i class="mdi-content-send right"></i>
            </button>
        </div>
    </form>
</div>
<script type="text/javascript" layout:fragment="script">
    $("input[type='hidden'][name^='_'] ").remove();
</script>
</body>
</html>